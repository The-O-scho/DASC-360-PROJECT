knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(dplyr)
library(jsonlite)
library(readxl)
df_1 <- read.csv("https://ourworldindata.org/grapher/expected-years-of-schooling.csv?v=1&csvType=filtered&useColumnShortNames=true&mapSelect=CHN~NOR~SWE~FIN~CAN~USA~RUS~DEU~NLD~DNK~IRL~ISL~GBR~ESP~FRA~ITA~MEX~IND~BFA~MLI~DZA~TCD~ZAF~RWA~COD~PRY~BRA~PER~COL~AUS~NZL~PNG~PAK&overlay=download-data")
df_2 <- read.csv("https://ourworldindata.org/grapher/average-years-of-schooling.csv?v=1&csvType=filtered&useColumnShortNames=true&mapSelect=CAN~USA~MEX~RUS~CHN~GBR~IRL~ISL~AND~ESP~FRA~DEU~DNK~NLD~ITA~BFA~RWA~COD~ZAF~SOM~TCD~DZA~MLI~AUS~PNG~NZL~BRA~PER~COL~NOR~FIN~SWE&overlay=download-data")
df_3 <- read.csv("https://ourworldindata.org/grapher/total-government-expenditure-on-education-gdp.csv?v=1&csvType=filtered&useColumnShortNames=true&mapSelect=CAN~USA&overlay=download-data")
df_4 <- read.csv("https://ourworldindata.org/grapher/schools-access-drinking-water.csv?v=1&csvType=full&useColumnShortNames=true")
df_5 <- read.csv("https://ourworldindata.org/grapher/human-rights-index-vdem.csv?v=1&csvType=full&useColumnShortNames=true")
df_5 = df_5 %>%
group_by(Entity) %>%
mutate(mean_human_rights = mean(civ_libs_vdem__estimate_best, na.rm = TRUE))
df_6 = read.csv("world_population.csv")
df_6 = df_6 %>%
rename(Entity = Country.Territory)
df_6 = df_6[,c("Entity", "Density..per.km.." )]
df_7 = read_excel("publications.xlsx")
df_7 = df_7 %>%
rename(Entity = Country)
df_7 = df_7[,"Citations per document"]
df_8 = merge(df_1,df_2,all = TRUE)
df_9 = merge(df_3,df_4,all = TRUE)
df_10 = merge(df_5,df_6,all = TRUE)
df_11 = merge(df_7, df_8, all = TRUE)
df_12 = merge(df_9, df_10, all = TRUE)
df_13 = merge(df_11, df_12, all = TRUE)
# countries = c("Guatemala", "Austria", "Greece", "Belgium", "Finland", "Germany", "United States", "Singapore",
# "Nepal", "South Korea", "Iran", "Japan", "Pakistan", "Vietnam", "China", "Trinidad and Tobago",
# "Costa Rica", "Netherlands", "Portugal", "Slovakia", "Norway", "Malaysia", "Cuba", "Canada",
# "Spain", "Italy", "Nicaragua", "Bangladesh", "Denmark", "Iraq", "UK", "Sri Lanka", "Sweden",
# "Thailand", "Mongolia", "Panama", "India", "Haiti", "Ireland", "Mexico", "Uzbekistan", "Honduras",
# "El Salvador", "Indonesia", "Hungary", "France", "Poland", "Philippines", "Saudi Arabia",
# "Czech Republic", "Dominican Republic", "Kazakhstan", "Switzerland", "Belize", "Jamaica",
# "Egypt", "South Africa", "Nigeria", "Tanzania", "Ethiopia")
#filtered_df = df_7 %>%
#filter(Entity %in% countries)
##This part I had to look up
##Im also not sure what time.1 is but it came with the data set so I kept it
final = df_13 %>%
group_by(Entity) %>%
summarise(across(everything(), ~ first(na.omit(.)))) %>%
drop_na() %>%
select(-Code, -Year, -time.1, -time, -owid_region, -civ_libs_vdem__estimate_best)
final
